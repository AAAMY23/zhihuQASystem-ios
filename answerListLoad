#import "answerListLoad.h"
#import "answerLoaditem.h"
@implementation answerListLoad
-(void)loadlistDataFinishWithBlock:(loadlistDataFinishblock)finishBlock answer:(NSString *)answerQuestionId{
    NSURL *answerUrl=[NSURL URLWithString:[NSString stringWithFormat:@"http://8.136.142.201:9090/answer?question_id=%@",answerQuestionId]];
    NSLog(@"answerQuestionId=%@",answerQuestionId);
    NSURLSession *answerSession=[NSURLSession sharedSession];
    NSURLSessionTask *answerDatatask=[answerSession dataTaskWithRequest:[NSURLRequest requestWithURL:answerUrl] completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {
        NSDictionary *answerData=[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
        NSDictionary *answerdic=answerData[@"data"];
        NSArray *answerListArray=[answerdic objectForKey:@"answerList"];
        NSMutableArray *listArray=[[NSMutableArray alloc]init];
        for(NSDictionary *str in answerListArray){
            answerLoaditem *list=[[answerLoaditem alloc]init];
            [list configWithDictonary:str];
            [listArray addObject:list];
        }
        dispatch_async(dispatch_get_main_queue(), ^{
        if(finishBlock){
            finishBlock(error==nil,listArray.copy);
        }
        });
   }];
    [answerDatatask resume];
}
@end
